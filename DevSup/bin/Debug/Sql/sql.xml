<?xml version="1.0" encoding="utf-8"?>
<sqlMap namespace="TableSearchInfo" xmlns="http://ibatis.apache.org/dataMapper"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">



  <resultMaps>
    <resultMap id="rmTableInfo" class="DevSup.Entity.DAO.TableSearchInfo">
      <result property="OWNER" column="OWNER" />
      <result property="TABLE_NAME" column="TABLE_NAME" />
      <result property="TABLE_COMMENTS" column="TABLE_COMMENTS" />
      <result property="CREATED_DAYS" column="CREATED_DAYS" />
      <result property="MODIFY_DAYS" column="MODIFY_DAYS" />
    </resultMap>
  </resultMaps>
  <statements>
    <select id="SELECT.TABLEINFO.S01"  resultMap="rmTableInfo" parameterclass="DevSup.Entity.DAO.TableSearchInfo">
      <![CDATA[ 

SELECT A.OWNER                                                              OWNER
     , A.TABLE_NAME                                                         TABLE_NAME
     , CASE WHEN B.COMMENTS IS NULL THEN '등록필요'
                                    ELSE '/* ' || TRIM(B.COMMENTS) || ' */' END TABLE_COMMENTS
     , 0                                                                    CREATED_DAYS
     , 0                                                                    MODIFY_DAYS
  FROM ALL_TABLES A
     , ALL_TAB_COMMENTS B
 WHERE A.TABLE_NAME = B.TABLE_NAME
 AND A.OWNER = B.OWNER
 AND B.TABLE_TYPE = 'TABLE'
 AND A.OWNER NOT IN (SELECT REGEXP_SUBSTR ( #EX_OWNER#, '[^,]+', 1, LEVEL )
                                          FROM DUAL
                                       CONNECT BY LEVEL <= REGEXP_COUNT ( #EX_OWNER#, ',' ) + 1)
ORDER BY DECODE(A.OWNER, 'HSUP', 2
                       , 'XSUP', 13
                       , 'HMED', 2
                       , 'XMED', 12
                       , 'HCOM', 4
                       , 'XCOM', 14
                       , 'HBIL', 1
                       , 'XBIL', 11
                               , 100)
       , A.TABLE_NAME
            
            
      ]]>
    </select>
  </statements>


</sqlMap>
